<!DOCTYPE html>
<html>
  <head>
    <title>Blueprint</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="grid-bg grainy-bg">
    <svg width="0" height="0" class="block">
      <filter id="grainy" x="0" y="0" width="100%" height="100%">
        <feTurbulence type="fractalNoise" baseFrequency=".3" numOctaves="2"/>
        <feColorMatrix type="saturate" values="0"/>
        <feBlend in="SourceGraphic" mode="multiply"/>
      </filter>
    </svg>
    <%= render "shared/notice" %>
    <main>
      <div class="fixed top-8 left-0 z-50">
        <a href="https://hackclub.com?utm_source=blueprint" target="_blank">
          <%= inline_svg 'hackclub-logo.svg', class: 'h-16' %>
        </a>
      </div>
      <div class="fixed top-8 right-8 z-50">
        <% if current_user.present? %>
          <%= render "shared/button", url: home_path, text: "Go home", variant: :outline, class: "bg-bp-dark border-2 px-4 py-2 text-xl" %>
        <% else %>
          <%= render "shared/button", url: login_path, text: "Log in!", variant: :outline, class: "bg-bp-dark border-2 px-4 py-2 text-xl" %>
        <% end %>
      </div>
      <div class="min-h-[200vh] h-full px-8 text-center relative"
           style="background-image: url('<%= asset_path('bg-nolines.png') %>'); 
                  background-size: 100vw auto; 
                  background-position: top center; 
                  background-repeat: no-repeat;
                  background-attachment: scroll;"">
                  
                  <!-- Grid fade overlay -->
        <div class="absolute left-0 w-full h-[800px] pointer-events-none z-30"
             style="top: calc(100vw - 800px);
                    background: linear-gradient(transparent, rgba(14, 48, 91, 0.95)),
                    linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
                    background-size: 100% 100%, 50px 50px, 50px 50px;
                    background-position: 0 0, 0 0, 0 0;"></div>
        
        <!-- Hero Content - Centered on Screen -->
        <div class="min-h-screen flex flex-col items-center justify-center space-y-32">
          <div class="space-y-2">
            <div class="relative flex flex-col items-center">
              <h1 class="text-[10rem]/40 font-rcgl-full">Blueprint</h1>
              <p class="text-4xl rotate-5 ml-auto bg-bp-dark p-1 -mt-7 -mr-8">...then build</p>
            </div>
            <div class="flex flex-col -ml-12">
              <h2 class="text-3xl text-center mr-52">Design a hardware project,</h2>
              <p class="text-xl text-right"> and we'll pay for hardware to build it!<sup>*</sup></p>
            </div>
          </div>
          <div class="flex flex-col items-center text-2xl space-y-2">
            <p class="uppercase text-3xl">Get free stickers</p>
            <div class="flex" data-controller="email-redirect" data-email-redirect-login-url-value="<%= login_path %>">
              <input type="email" data-email-redirect-target="input" class="text-left py-1.5 px-4 appearance-none outline-0 border-2 border-r-0" placeholder="orpheus@hackclub.com">
              <button type="button" data-action="click->email-redirect#go" class="text-bp-dark bg-white w-full px-6 hover:bg-gray-200 border-2 border-l-0 border-white hover:border-gray-200">Join</button>
            </div>
          </div>
        </div>
        
        <!-- Projects Carousel in Lower Header -->
        <div class="w-full py-24 pb-96">
          <div class="flex flex-col items-center px-8 mb-12">
            <h2 class="text-5xl text-center font-bold mb-4">Featured Projects</h2>
            <p class="text-xl text-center text-white/80">See what other makers are building</p>
          </div>
          
          <!-- Carousel Container -->
          <div class="w-full relative z-20">
            <div class="relative overflow-hidden h-[400px]">
                <!-- Carousel Track -->
                <div id="project-carousel" class="flex">
                  
                  <!-- Project Card 1 -->
                  <a href="https://github.com/alexm-dev" target="_blank" class="flex-none w-80 mx-4 bg-hatch border-2 border-white/25 p-6 hover:border-white/50 transition-colors cursor-pointer block">
                    <div class="w-full h-48 bg-bp-darker mb-4 flex items-center justify-center">
                      <div class="text-4xl">ðŸŽµ</div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">MIDI Controller</h3>
                    <p class="text-sm text-white/80 mb-3">A custom MIDI controller with rotary encoders and RGB keys for music production</p>
                    <div class="flex items-center justify-between">
                      <span class="text-xs bg-bp-dark px-2 py-1">by Alex M.</span>
                      <span class="text-xs text-white/60">2 days ago</span>
                    </div>
                  </a>

                  <!-- Project Card 2 -->
                  <a href="https://github.com/sarahkodes" target="_blank" class="flex-none w-80 mx-4 bg-hatch border-2 border-white/25 p-6 hover:border-white/50 transition-colors cursor-pointer block">
                    <div class="w-full h-48 bg-bp-darker mb-4 flex items-center justify-center">
                      <div class="text-4xl">ðŸ”‘</div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Security Key</h3>
                    <p class="text-sm text-white/80 mb-3">Hardware authentication device with fingerprint sensor and NFC capabilities</p>
                    <div class="flex items-center justify-between">
                      <span class="text-xs bg-bp-dark px-2 py-1">by Sarah K.</span>
                      <span class="text-xs text-white/60">1 week ago</span>
                    </div>
                  </a>

                  <!-- Project Card 3 -->
                  <a href="https://github.com/jordanleaf" target="_blank" class="flex-none w-80 mx-4 bg-hatch border-2 border-white/25 p-6 hover:border-white/50 transition-colors cursor-pointer block">
                    <div class="w-full h-48 bg-bp-darker mb-4 flex items-center justify-center">
                      <div class="text-4xl">ðŸŒ±</div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Smart Garden</h3>
                    <p class="text-sm text-white/80 mb-3">IoT garden monitoring system with automated watering and light control</p>
                    <div class="flex items-center justify-between">
                      <span class="text-xs bg-bp-dark px-2 py-1">by Jordan L.</span>
                      <span class="text-xs text-white/60">3 days ago</span>
                    </div>
                  </a>

                  <!-- Project Card 4 -->
                  <a href="https://github.com/mayarobotics" target="_blank" class="flex-none w-80 mx-4 bg-hatch border-2 border-white/25 p-6 hover:border-white/50 transition-colors cursor-pointer block">
                    <div class="w-full h-48 bg-bp-darker mb-4 flex items-center justify-center">
                      <div class="text-4xl">ðŸ¤–</div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Robot Arm</h3>
                    <p class="text-sm text-white/80 mb-3">6-DOF robotic arm with camera vision and precision control for pick-and-place tasks</p>
                    <div class="flex items-center justify-between">
                      <span class="text-xs bg-bp-dark px-2 py-1">by Maya P.</span>
                      <span class="text-xs text-white/60">5 days ago</span>
                    </div>
                  </a>

                  <!-- Duplicate cards -->
                  <a href="https://github.com/alexm-dev" target="_blank" class="flex-none w-80 mx-4 bg-hatch border-2 border-white/25 p-6 hover:border-white/50 transition-colors cursor-pointer block">
                    <div class="w-full h-48 bg-bp-darker mb-4 flex items-center justify-center">
                      <div class="text-4xl">ðŸŽµ</div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">MIDI Controller</h3>
                    <p class="text-sm text-white/80 mb-3">A custom MIDI controller with rotary encoders and RGB keys for music production</p>
                    <div class="flex items-center justify-between">
                      <span class="text-xs bg-bp-dark px-2 py-1">by Alex M.</span>
                      <span class="text-xs text-white/60">2 days ago</span>
                    </div>
                  </a>

                  <a href="https://github.com/sarahkodes" target="_blank" class="flex-none w-80 mx-4 bg-hatch border-2 border-white/25 p-6 hover:border-white/50 transition-colors cursor-pointer block">
                    <div class="w-full h-48 bg-bp-darker mb-4 flex items-center justify-center">
                      <div class="text-4xl">ðŸ”‘</div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Security Key</h3>
                    <p class="text-sm text-white/80 mb-3">Hardware authentication device with fingerprint sensor and NFC capabilities</p>
                    <div class="flex items-center justify-between">
                      <span class="text-xs bg-bp-dark px-2 py-1">by Sarah K.</span>
                      <span class="text-xs text-white/60">1 week ago</span>
                    </div>
                  </a>

                  <a href="https://github.com/jordanleaf" target="_blank" class="flex-none w-80 mx-4 bg-hatch border-2 border-white/25 p-6 hover:border-white/50 transition-colors cursor-pointer block">
                    <div class="w-full h-48 bg-bp-darker mb-4 flex items-center justify-center">
                      <div class="text-4xl">ðŸŒ±</div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Smart Garden</h3>
                    <p class="text-sm text-white/80 mb-3">IoT garden monitoring system with automated watering and light control</p>
                    <div class="flex items-center justify-between">
                      <span class="text-xs bg-bp-dark px-2 py-1">by Jordan L.</span>
                      <span class="text-xs text-white/60">3 days ago</span>
                    </div>
                  </a>

                  <a href="https://github.com/mayarobotics" target="_blank" class="flex-none w-80 mx-4 bg-hatch border-2 border-white/25 p-6 hover:border-white/50 transition-colors cursor-pointer block">
                    <div class="w-full h-48 bg-bp-darker mb-4 flex items-center justify-center">
                      <div class="text-4xl">ðŸ¤–</div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Robot Arm</h3>
                    <p class="text-sm text-white/80 mb-3">6-DOF robotic arm with camera vision and precision control for pick-and-place tasks</p>
                    <div class="flex items-center justify-between">
                      <span class="text-xs bg-bp-dark px-2 py-1">by Maya P.</span>
                      <span class="text-xs text-white/60">5 days ago</span>
                    </div>
                  </a>

                </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <div class="w-full flex flex-col items-center px-8">
      <section class="py-24 w-full max-w-6xl hidden">
        <div class="flex flex-col items-center px-8">
          <div class="flex flex-col py-10 px-24 border-2 bg-hatch border-white/25">
            <p class="text-2xl text-left -mb-1">This fall...</p>
            <h2 class="text-5xl text-center mr-8 ml-8">Design a hardware project,</h2>
            <p class="text-2xl text-right"> and we'll pay for hardware to build it!<sup>*</sup></p>
          </div>
        </div>
      </section>
    </div>
    
    <!-- Spacing before divider -->
    <div class="py-12"></div>
    
    <!-- Full-Width Divider Image -->
    <div class="w-screen relative left-1/2 -translate-x-1/2 py-16 pt-24">
      <%= image_tag "divider2.png", class: "w-full h-auto" %>
    </div>
    
    <div class="w-full flex flex-col items-center px-8">
      
      <!-- FAQ Section -->
      <section class="py-24 w-full max-w-6xl">
        <div class="flex flex-col items-center px-8">
          <h2 class="text-4xl text-center font-bold">FAQ</h2>
          <div class="h-6"></div>
          <div class="grid grid-cols-3 gap-8 w-full">
            <div class="flex flex-col py-6 px-8 border-2 bg-hatch border-white/25">
              <h3 class="text-xl font-bold mb-3">When does this program end?</h3>
              <p class="text-base">Currently, the end-date of Blueprint is December 1st</p>
            </div>
            
            <div class="flex flex-col py-6 px-8 border-2 bg-hatch border-white/25">
              <h3 class="text-xl font-bold mb-3">How many projects can I make?</h3>
              <p class="text-base">As many as you like! We just ask that you only do one of each starter project</p>
            </div>
            
            <div class="flex flex-col py-6 px-8 border-2 bg-hatch border-white/25">
              <h3 class="text-xl font-bold mb-3">Who can apply?</h3>
              <p class="text-base">Any student currently enrolled in high school!</p>
            </div>
            
            <div class="flex flex-col py-6 px-8 border-2 bg-hatch border-white/25">
              <h3 class="text-xl font-bold mb-3">Can I double dip with Summer of Making or any other Hack Club program?</h3>
              <p class="text-base">No! Double-dipping is not allowed. If you have coding time for your project, you can journal it, get tickets, and get prizes from the tool bag.</p>
            </div>
            
            <div class="flex flex-col py-6 px-8 border-2 bg-hatch border-white/25">
              <h3 class="text-xl font-bold mb-3">Do I need prior experience?</h3>
              <p class="text-base">Not at all! We welcome beginners and provide resources to help you learn and build your project successfully.</p>
            </div>
            
            <div class="flex flex-col py-6 px-8 border-2 bg-hatch border-white/25">
              <h3 class="text-xl font-bold mb-3">If I need more money, can I pay myself?</h3>
              <p class="text-base">Yes!</p>
            </div>
          </div>
          <div class="pt-16 text-center">
            <div class="h-6"></div>
            <a href="/faq" class="text-bp-warning hover:text-white underline text-lg">
              View Full FAQ â†’
            </a>
          </div>
        </div>
      </section>
    </div>

    <!-- Carousel JavaScript -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const carousel = document.getElementById('project-carousel');
        if (!carousel) return;
        
        // Individual card wrapping variables
        let scrollSpeed = 0.5; // Pixels per frame
        let isAutoScrolling = true;
        
        const cardWidth = 320; // 320px (w-80 + margin)
        const cards = Array.from(carousel.children);
        
        // Set up carousel container and individual card positioning
        carousel.style.position = 'relative';
        carousel.style.height = '400px'; // Match h-[400px]
        
        cards.forEach((card, index) => {
          card.style.position = 'absolute';
          card.style.left = `${index * cardWidth}px`;
          card.style.top = '0';
        });
        
        // Individual card animation function
        function animateCards() {
          if (isAutoScrolling) {
            const containerWidth = carousel.parentElement.offsetWidth;
            
            cards.forEach((card) => {
              const currentLeft = parseFloat(card.style.left) || 0;
              const newLeft = currentLeft - scrollSpeed;
              
              // If card moved completely off left edge, wrap to just off the right edge
              if (newLeft <= -cardWidth) {
                // Calculate the rightmost card position to maintain tight spacing
                const allPositions = cards.map(c => parseFloat(c.style.left) || 0);
                const rightmostPosition = Math.max(...allPositions);
                
                // Position new card immediately after the rightmost card
                card.style.left = `${rightmostPosition + cardWidth}px`;
              } else {
                card.style.left = `${newLeft}px`;
              }
            });
          }
          
          requestAnimationFrame(animateCards);
        }
        
        // Hover controls
        carousel.addEventListener('mouseenter', () => {
          isAutoScrolling = false;
        });
        
        carousel.addEventListener('mouseleave', () => {
          isAutoScrolling = true;
        });
        
        // Touch pause
        carousel.addEventListener('touchstart', () => {
          isAutoScrolling = false;
          setTimeout(() => isAutoScrolling = true, 3000);
        });
        
        // Initialize
        animateCards();
      });
    </script>
  </body>
</html>
